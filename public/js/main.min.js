(function(){function a(a){var b=Date.parse(a)-Date.parse(new Date),c=Math.floor(b/1e3%60),d=Math.floor(b/1e3/60%60),e=Math.floor(b/3600000%24),f=Math.floor(b/86400000);return{total:b,days:f,hours:e,minutes:d,seconds:c}}function b(){m.features.forEach(function(a){var b=document.createElement("div");b.id="marker-"+a.properties.id,b.className="marker marker-"+a.properties.id,new mapboxgl.Marker(b,{offset:[0,-23]}).setLngLat(a.geometry.coordinates).addTo(l),b.addEventListener("click",function(b){d(a),f(a);var c=document.getElementsByClassName("active");b.stopPropagation(),c[0]&&c[0].classList.remove("active");var e=document.getElementById("listing-"+a.properties.id);e.classList.add("active")})})}function c(a){a.features.forEach(function(b){var c=b.properties,e=document.getElementById("listings"),g=e.appendChild(document.createElement("a"));g.id="listing-"+c.id,g.className="item";var h=g.appendChild(document.createElement("h3"));g.href="#",g.id="link-"+c.id,h.className="title",h.innerHTML=c.name;var i=g.appendChild(document.createElement("p"));i.innerHTML=c.address,c.phone&&(i.innerHTML+=" &middot; "+c.phoneFormatted),g.addEventListener("click",function(){for(var b=0;b<a.features.length;b++)if(this.id==="link-"+a.features[b].properties.id){var c=a.features[b];d(c),f(c)}else console.log("nope");var e=document.getElementsByClassName("active");e[0]&&e[0].classList.remove("active"),this.parentNode.classList.add("active")})})}function d(a){l.flyTo({center:a.geometry.coordinates,zoom:15})}function f(a){var b=document.getElementsByClassName("mapboxgl-popup");b[0]&&b[0].remove();new mapboxgl.Popup({closeOnClick:!1}).setLngLat(a.geometry.coordinates).setHTML("<h4>"+a.properties.name+"</h4><h5>"+a.properties.address+"</h5>").addTo(l)}var g=new Sakura("header"),h=0;window.addEventListener("scroll",function(){var a=window.pageYOffset||document.documentElement.scrollTop;a>h?1600<h&&document.querySelector(".sakura")&&g.stop(!1):1600>h&&!document.querySelector(".sakura")&&g.start(),h=0>=a?0:a},!1);var i=new ScrollMagic.Controller;new ScrollMagic.Scene({triggerElement:"#rsvp"}).setClassToggle("#rsvp","reveal").addTo(i),new ScrollMagic.Scene({triggerElement:"#gallery"}).setClassToggle("#gallery","reveal").addTo(i),new ScrollMagic.Scene({triggerElement:"#gallery-flowers"}).setClassToggle("#my-gallery","reveal").addTo(i),new ScrollMagic.Scene({triggerElement:"#locations"}).setClassToggle("#locations","reveal").addTo(i),new ScrollMagic.Scene({triggerElement:"#song"}).setClassToggle("#song-wrapper","reveal").addTo(i),1023<window.screen.availWidth?new ScrollMagic.Scene({triggerElement:"#invitation-title",offset:50}).setClassToggle("#invitation__info-holder","reveal").addTo(i):new ScrollMagic.Scene({triggerElement:"#invitation-title",offset:400}).setClassToggle("#invitation__info-holder","reveal").addTo(i),document.getElementById("rsvp-form").addEventListener("submit",function(a){a.preventDefault();var b=document.getElementById("rsvpBtn");b.disable=!0,b.innerText="\u0391\u03C0\u03BF\u03C3\u03C4\u03BF\u03BB\u03AE...";for(var c,d=document.getElementById("name").value,e=document.getElementsByName("rsvpRes"),f=0;f<e.length;f+=1)e[f].checked&&(c=e[f].value);c=+c;var g={name:d,response:c};fetch("//"+window.location.hostname+":5000/rsvp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).then(a=>a.json()).then(a=>{if(b.disabled=!1,b.innerText="\u0391\u03C0\u03BF\u03C3\u03C4\u03BF\u03BB\u03AE","OK"!==a.status){const{message:b}=a;Object.entries(errors).forEach(()=>{let a=document.getElementById("error");a.innerText=b})}else document.querySelector(".back").classList.remove("hidden"),document.querySelector(".form-wrapper").classList.remove("flowers"),document.querySelector(".form-wrapper").classList.add("flip"),setTimeout(function(){document.querySelector(".form-wrapper").classList.add("flowers")},600)}).catch(a=>console.log(a))});(function(a){for(var b=function(a){for(var b,c,d,e,f=a.childNodes,g=f.length,h=[],j=0;j<g;j++)(b=f[j],1===b.nodeType)&&(c=b.children[0],d=c.getAttribute("data-size").split("x"),e={src:c.getAttribute("href"),w:parseInt(d[0],10),h:parseInt(d[1],10)},1<b.children.length&&(e.title=b.children[1].innerHTML),0<c.children.length&&(e.msrc=c.children[0].getAttribute("src")),e.el=b,h.push(e));return h},c=function a(b,c){return b&&(c(b)?b:a(b.parentNode,c))},d=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.target||a.srcElement,d=c(b,function(a){return a.tagName&&"FIGURE"===a.tagName.toUpperCase()});if(d){for(var g,h=d.parentNode,j=d.parentNode.childNodes,k=j.length,l=0,m=0;m<k;m++)if(1===j[m].nodeType){if(j[m]===d){g=l;break}l++}return 0<=g&&f(g,h),!1}},e=function(){var a=window.location.hash.substring(1),b={};if(5>a.length)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");2>e.length||(b[e[0]]=e[1])}return b.gid&&(b.gid=parseInt(b.gid,10)),b},f=function(a,c,d,e){var f,g,h,i=document.querySelectorAll(".pswp")[0];if(h=b(c),g={galleryUID:c.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(a){var b=h[a].el.getElementsByTagName("img")[0],c=window.pageYOffset||document.documentElement.scrollTop,d=b.getBoundingClientRect();return{x:d.left,y:d.top+c,w:d.width}}},!e)g.index=parseInt(a,10);else if(g.galleryPIDs){for(var k=0;k<h.length;k++)if(h[k].pid==a){g.index=k;break}}else g.index=parseInt(a,10)-1;isNaN(g.index)||(d&&(g.showAnimationDuration=0),f=new PhotoSwipe(i,PhotoSwipeUI_Default,h,g),f.init())},g=document.querySelectorAll(a),h=0,j=g.length;h<j;h++)g[h].setAttribute("data-pswp-uid",h+1),g[h].onclick=d;var k=e();k.pid&&k.gid&&f(k.pid,g[k.gid-1],!0,!0)})(".my-gallery");var j=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},k=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a};window.fitText=function(a,b,c){var d=k({minFontSize:-1/0,maxFontSize:1/0},c),e=function(a){var c=function(){a.style.fontSize=Math.max(Math.min(a.clientWidth/(10*(b||1)),parseFloat(d.maxFontSize)),parseFloat(d.minFontSize))+"px"};c(),j(window,"resize",c),j(window,"orientationchange",c)};if(a.length)for(var f=0;f<a.length;f++)e(a[f]);else e(a);return a},window.fitText(document.querySelectorAll(".title-header"));(function(b,c){function d(){var b=a(c);f.innerHTML=b.days,g.innerHTML=("0"+b.hours).slice(-2),h.innerHTML=("0"+b.minutes).slice(-2),i.innerHTML=("0"+b.seconds).slice(-2),0>=b.total&&clearInterval(j)}var e=document.getElementById(b),f=e.querySelector(".days"),g=e.querySelector(".hours"),h=e.querySelector(".minutes"),i=e.querySelector(".seconds");d();var j=setInterval(d,1e3)})("countdown-timer","September 5 2020 19:00:00 GMT+0300"),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),mapboxgl.accessToken="pk.eyJ1IjoiYW5hcGFsIiwiYSI6ImNrNTV0bnlydjAzc2Izb3FmcXBzenZieTEifQ.i0feZTHcT5F4cAwT0hF9Iw";var l=new mapboxgl.Map({container:"map",style:"mapbox://styles/anapal/ckdd4w7p03rte1hl6ctdsqonh",center:[23.39,41.236],zoom:12.5});l.addControl(new mapboxgl.NavigationControl),l.scrollZoom.disable();var m={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[23.39143,41.22992]},properties:{id:1,name:"\u0399\u03B5\u03C1\u03CC\u03C2 \u039D\u03B1\u03CC\u03C2 \u0391\u03B3. \u03A0\u03B1\u03C1\u03B1\u03C3\u03BA\u03B5\u03C5\u03AE\u03C2",phoneFormatted:"",phone:"",address:"\u0392\u03B1\u03C3\u03B9\u03BB\u03AD\u03C9\u03C2 \u0393\u03B5\u03C9\u03C1\u03B3\u03AF\u03BF\u03C5 \u0392' 65",city:"\u03A3\u03B9\u03B4\u03B7\u03C1\u03CC\u03BA\u03B1\u03C3\u03C4\u03C1\u03BF",country:"\u0395\u03BB\u03BB\u03AC\u03B4\u03B1",postalCode:"623 00"}},{type:"Feature",geometry:{type:"Point",coordinates:[23.40888,41.26032]},properties:{id:2,name:"\u039A\u03C4\u03AE\u03BC\u03B1 \u0393\u03AC\u03BB\u03B2\u03B1",phoneFormatted:"698 28 00 200",phone:"6982800200",address:"\u0396\u03B5\u03C3\u03C4\u03AC \u03BD\u03B5\u03C1\u03AC \u03A3\u03B9\u03B4\u03B7\u03C1\u03BF\u03BA\u03AC\u03C3\u03C4\u03C1\u03BF\u03C5",city:"\u03A3\u03B9\u03B4\u03B7\u03C1\u03CC\u03BA\u03B1\u03C3\u03C4\u03C1\u03BF",country:"\u0395\u03BB\u03BB\u03AC\u03B4\u03B1",postalCode:"623 00"}}]};l.on("load",function(){l.addSource("places",{type:"geojson",data:m}),c(m),b()})})();