!function(){["track","timer","duration","playBtn","pauseBtn","volumeBtn","progress","bar","wave","loading","list","volume","barEmpty","barFull","sliderBtn"].forEach(function(n){window[n]=document.getElementById(n)});function n(n){this.playlist=n,this.index=0}n.prototype={play:function(n){var e=this;n="number"==typeof n?n:e.index;var t,i=e.playlist[n];(t=i.howl?i.howl:i.howl=new Howl({src:["../audio/"+i.file+".webm","../audio/"+i.file+".mp3"],html5:!0,onplay:function(){duration.innerHTML=e.formatTime(Math.round(t.duration())),requestAnimationFrame(e.step.bind(e)),o.container.style.display="block",bar.style.display="none",pauseBtn.style.display="block"},onload:function(){o.container.style.display="block",bar.style.display="none",loading.style.display="none"},onend:function(){o.container.style.display="none",bar.style.display="block",e.skip("next")},onpause:function(){o.container.style.display="none",bar.style.display="block"},onstop:function(){o.container.style.display="none",bar.style.display="block"},onseek:function(){requestAnimationFrame(e.step.bind(e))}})).play(),"loaded"===t.state()?(playBtn.style.display="none",pauseBtn.style.display="block"):(loading.style.display="block",playBtn.style.display="none",pauseBtn.style.display="none"),e.index=n},pause:function(){this.playlist[this.index].howl.pause(),playBtn.style.display="block",pauseBtn.style.display="none"},skip:function(n){var e=this,t=0;"prev"===n?(t=e.index-1)<0&&(t=e.playlist.length-1):(t=e.index+1)>=e.playlist.length&&(t=0),e.skipTo(t)},skipTo:function(n){var e=this;e.playlist[e.index].howl&&e.playlist[e.index].howl.stop(),progress.style.width="0%",e.play(n)},volume:function(n){Howler.volume(n);var e=90*n/100;barFull.style.width=100*e+"%",sliderBtn.style.left=window.innerWidth*e+.05*window.innerWidth-25+"px"},seek:function(n){var e=this.playlist[this.index].howl;e.playing()&&e.seek(e.duration()*n)},step:function(){var n=this,e=n.playlist[n.index].howl,t=e.seek()||0;timer.innerHTML=n.formatTime(Math.round(t)),progress.style.width=(t/e.duration()*100||0)+"%",e.playing()&&requestAnimationFrame(n.step.bind(n))},toggleVolume:function(){var n="block"===volume.style.display?"none":"block";setTimeout(function(){volume.style.display=n},"block"==n?0:500),volume.className="block"==n?"fadein":"fadeout"},formatTime:function(n){var e=Math.floor(n/60)||0,t=n-60*e||0;return e+":"+(t<10?"0":"")+t}};var l=new n([{title:"Το τραγούδι μας",file:"John-Legend-All-Of-Me",howl:null}]);playBtn.addEventListener("click",function(){l.play()}),pauseBtn.addEventListener("click",function(){l.pause()}),waveform.addEventListener("click",function(n){l.seek(n.clientX/window.innerWidth)}),volumeBtn.addEventListener("click",function(){l.toggleVolume()}),volume.addEventListener("click",function(){l.toggleVolume()}),barEmpty.addEventListener("click",function(n){var e=n.layerX/parseFloat(barEmpty.scrollWidth);l.volume(e)}),sliderBtn.addEventListener("mousedown",function(){window.sliderDown=!0}),sliderBtn.addEventListener("touchstart",function(){window.sliderDown=!0},{passive:!0}),volume.addEventListener("mouseup",function(){window.sliderDown=!1}),volume.addEventListener("touchend",function(){window.sliderDown=!1});function e(n){var e,t;window.sliderDown&&(e=(n.clientX||n.touches[0].clientX)-.05*window.innerWidth,t=Math.min(1,Math.max(0,e/parseFloat(barEmpty.scrollWidth))),l.volume(t))}volume.addEventListener("mousemove",e,{passive:!0}),volume.addEventListener("touchmove",e,{passive:!0});var o=new SiriWave({container:waveform,width:window.innerWidth,height:.3*window.innerHeight,cover:!0,speed:.03,amplitude:.7,frequency:2});o.start();function t(){var n=.3*window.innerHeight,e=window.innerWidth;o.height=n,o.height_2=n/2,o.MAX=o.height_2-4,o.width=e,o.width_2=e/2,o.width_4=e/4,o.canvas.height=n,o.canvas.width=e,o.container.style.margin=-n/2+"px auto";var t,i=l.playlist[l.index].howl;i&&(t=.9*i.volume(),sliderBtn.style.left=window.innerWidth*t+.05*window.innerWidth-25+"px")}window.addEventListener("resize",t),t()}();